
# secdev-seed-s06-s08 (учебный шаблон)

**Назначение:** минимальный учебный проект для семинаров **S06–S08** (Secure Coding → Containerization → CI).
Шаблон **намеренно небезопасен** (SQL injection, XSS, слабая аутентификация), чтобы у студентов были патчи для S06.

## Стек
- Python 3.11+
- FastAPI + Uvicorn
- SQLite (в файле `app.db`)
- Jinja2 (шаблоны)
- pytest (+ httpx) для автотестов

## Локальный запуск One-liner:

1. `make venv` + `make deps` + `make init` - создать окружение
2. `make run` - запустить приложение
3. `make ci-s06` - запустить тесты, результат создастся в `EVIDENCE/S06`, файл `test-report.xml`

Главная страница: http://127.0.0.1:8000/

## Тесты
```bash
pytest -q
```
Тесты покрывают SQLi, XSS, rate-limit, заголовки безопасности и работу env-конфига.

## Конфиги / переменные окружения
- `APP_NAME` — заголовок приложения (по умолчанию `secdev-seed-s06-s08`).
- `DEBUG` — включает режим отладки (`true` / `false`).
- `SECRET_KEY` — используется для генерации токена; держите значение только в окружении.
- Скопируйте `.env.example` в личный `.env` (не коммитим) и заполните значения при необходимости.

## Что править на S06 (минимум)
- Параметризация SQL (sqlite параметризованные запросы)
- Убрать небезопасный `|safe` в шаблоне (или экранировать вывод)
- Усилить валидацию входных данных и обработку ошибок
- Довести тесты до зелёных и сформировать **one-liner** для DV
- Складывать отчёты/логи в `EVIDENCE/S06/`

## Лицензия
MIT (только в учебных целях; уязвимости добавлены намеренно).

---

## S07 — Containerization (болванка)
Быстрый старт:
```bash
docker compose up --build
```
TODO на S07:
- Убедиться, что ваш **one-liner** из S06 переносится в контейнерный сценарий (entrypoint/команда).
- Добавить настройки безопасности (user non-root, ограничение прав, healthcheck).

## S08 — CI Minimal (болванка)
В репозитории уже есть `.github/workflows/ci.yml` с шагами: checkout → python → cache pip → deps → init DB → pytest → upload artifacts.
TODO на S08:
- Довести тесты до зелёных (иначе CI красный — это нормально на старте).
- Проверить, что артефакты попадают в `EVIDENCE/S08/` и доступны в job artifacts.
- (Опционально) добавить публикацию HTML-отчётов, coverage и т. п.
